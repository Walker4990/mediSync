<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mediSync.project.insurance.mapper.InsurerMapper">

    <update id="updateInsurer" parameterType="drug">
        UPDATE insurer
        SET
        insurer_name = #{insurerName}
        WHERE insurer_code = #{insuranceCode}
    </update>

    <insert id="upsertInsurer">
        INSERT INTO insurer (insurer_code, insurer_name, api_endpoint, contact)
        VALUES (#{code}, #{name}, #{endpoint}, #{contact})
        ON DUPLICATE KEY UPDATE
        insurer_name = VALUES(insurer_name),
        api_endpoint = VALUES(api_endpoint),
        contact      = VALUES(contact)
    </insert>

    <!-- 전체 목록 조회 -->
    <select id="findAll" resultType="map">
        SELECT insurer_code, insurer_name, api_endpoint, contact
        FROM insurer
        ORDER BY insurer_name ASC
    </select>

    <!-- 전체 목록 조회 -->
    <select id="getInsurerCode" resultType="insurer">
        SELECT
        insurer_code,
        insurer_name
        FROM insurer
        ORDER BY insurer_code ASC
    </select>

</mapper>
