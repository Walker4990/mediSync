<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.mediSync.project.drug.mapper.DrugInOutMapper">

    <select id="getLotNo" resultType="String">
        select lot_no from drug_purchase
    </select>
    <select id="getDrugCodes" resultType="String">
        select drug_code from drug
    </select>

   <update id="plusDrugInIut" parameterType="drugpurchase">
       update drug
       set quantity = quantity + #{quantity}
       where drug_code = #{drugCode}
   </update>

    <update id="minusDrugInIut" parameterType="drugpurchase">
        update drug
        set quantity = quantity - #{quantity}
        where drug_code = #{drugCode}
    </update>


    <insert id="insertDurgPurchase" parameterType="drugpurchase">
        insert into drug_purchase(drug_code, quantity, purchase_price,lot_no, expiration_date, location)
        values(#{drugCode}, #{quantity}, #{purchasePrice}, #{lotNo}, #{expirationDate}, #{location})
    </insert>
</mapper>
